<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Dodavanje korisnika</title>
</head>

<script type = "text/javascript" src="js/jquery.js"></script>
<script type = "text/javascript" src="js/dodajKorisnika.js"></script>
<script type="text/javascript" src="js/proveraLogovanja.js"></script>
<script type="text/javascript">
	function izlistajOrganizacije(){
	    $.ajax({
	        type: "GET",
	        url: "/dobaviTrenutnogKorisnika",
	        data: 0,
	        contentType:"application/json",
	        dataType: "json",
	        success: function(data){
	           //ako je data==0 onda je superadmin, ako je 1 onda je admin, ako je 2 onda je obicni korisnik
	            if(data===0){
	               $("#organizacijaAdmin").hide();
	               $("#izborOrganizacije").empty();
	               $.ajax({
	                   type:"GET",
	                   url: "/dobaviSveOrganizacije",
	                   data:0,
	                   contentType:"application/json",
	                   dataType:"json",
	                   success:function(data){
	                       //vratice listu svih organizacija iz servera
	                       data.array.forEach(element => {
	                           $("#izborOrganizacije").append($("<option>").text(element.ime))
	                       });
	                       $("#izborUloge").append($("<option>").text("Admin"));
	                       $("#izborUloge").append($("<option>").text("Korisnik"));
	                   }
	               })
	           }else if(data===1){
	               $.ajax({
	                   type:"GET",
	                   url:"/dobaviSveOrganizacije",
	                   data:0,
	                   contentType:"application/json",
	                   dataType:"json",
	                   success:function(data){
	                       $("#organizacijaAdmin").text(data.ime);
	                       $("#izborOrganizacije").hide();
	                       $("izborUloge").append($("<option>").text("Admin"));
	                       $("izborUloge").append($("<option>").text("Korisnik"));
	                   }
	               })
	           } 
	        }
	    })
	    
	};
</script>


<body onload = "myFunction()">
	<h2>Dodavanje korisnika</h2>
	<form id="addUser">
	<table id="tabelaAddUser">
		<tr>
			<td>Korisniƒçko ime</td>
			<td><input class="username" type="text" name="usename" id="username"></td>
		</tr>
		<tr>
			<td>Lozinka</td>
			<td><input type="password" class="password" name="password" id="password"></td>
		</tr>
		<tr>
			<td>Ime</td>
			<td><input type="text" class="ime" name="ime" id="name"></td>
		</tr>
		<tr>
			<td>Prezime</td>
			<td><input type="text" class="prezime" name="prezime" id="prezime"></td>
		</tr>
		<tr id="organizacija">
			<td>Izbor organizacije</td>
			<td>
				<select id = "izborOrganizacije">
				</select>
			</td>
		</tr>
		<tr id="organizacijaAdmin">
			<td>Organizacija</td>
		</tr>
		<tr>
			<td>Izbor uloge</td>
			<td>
				<select id="izborUloge">
				</select>
			</td>
		</tr>
		<tr>
			<td></td>
			<td><button id="addUserButton">Dodaj korisnika</button></td>
		</tr>
	</table>
	</form>
</body>
</html>